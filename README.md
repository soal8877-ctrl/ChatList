# ChatList - Сравнение ответов нейросетей

Приложение с графическим интерфейсом на PyQt5 для одновременного сравнения ответов различных AI моделей на один и тот же промт.

## Возможности

- **Многомодельное сравнение**: Отправка запросов к нескольким AI моделям одновременно
- **Поддержка различных API**: OpenAI, DeepSeek, Groq, OpenRouter
- **Управление моделями**: Добавление, редактирование, удаление и активация/деактивация моделей
- **Сохранение промтов**: Сохранение промтов с тегами для быстрого доступа
- **Просмотр результатов**: Табличное отображение ответов с возможностью просмотра в Markdown формате
- **Сохранение результатов**: Сохранение выбранных результатов в базу данных
- **Экспорт данных**: Экспорт результатов в Markdown или JSON форматы
- **Логирование**: Детальное логирование всех запросов с техническими деталями
- **Настройки**: Настройка таймаутов запросов

## Установка

### Требования

- Python 3.7+
- pip

### Установка зависимостей

```bash
pip install -r requirements.txt
```

Зависимости:
- PyQt5==5.15.10
- requests==2.31.0
- python-dotenv==1.0.0
- pyinstaller>=6.17.0 (для создания исполняемого файла)

## Конфигурация

### Переменные окружения

Приложение использует файл `.env.local` для хранения API ключей. Создайте этот файл в корне проекта:

```env
OPENAI_API_KEY=your_openai_api_key_here
DEEPSEEK_API_KEY=your_deepseek_api_key_here
GROQ_API_KEY=your_groq_api_key_here
OPENROUTER_API_KEY=your_openrouter_api_key_here
```

**Важно**: Названия переменных должны соответствовать тем, которые вы указываете при добавлении моделей в приложении.

## Запуск приложения

```bash
python main.py
```

## Использование

### Добавление моделей

1. Откройте меню **Модели** → **Управление моделями**
2. Нажмите **Добавить модель**
3. Заполните форму:
   - **Название**: Отображаемое имя модели
   - **API URL**: URL эндпоинта API
   - **API ID (model)**: Идентификатор модели для API (например, `gpt-4-turbo` или `openai/gpt-4-turbo`)
   - **Имя переменной окружения с API-ключом**: Имя переменной из `.env.local`
   - **Тип API**: Выберите тип (openai, deepseek, groq, openrouter)
   - **Активна**: Отметьте, если модель должна быть активна по умолчанию

### Отправка запросов

1. Введите промт в текстовое поле
2. Или выберите сохраненный промт из выпадающего списка
3. Нажмите **Отправить**
4. Дождитесь ответов от всех активных моделей
5. Просмотрите результаты в таблице
6. При необходимости откройте ответ в Markdown формате, нажав кнопку **Открыть**
7. Выберите результаты, которые хотите сохранить, отметив чекбоксы
8. Нажмите **Сохранить выбранные**

### Сохранение промтов

1. Введите промт в текстовое поле
2. Нажмите **Сохранить промт**
3. Введите теги (через запятую, необязательно)
4. Промт будет сохранен и доступен для выбора из выпадающего списка

### Просмотр сохраненных данных

- **Промты**: Меню **Промты** → **Просмотр промтов** (с поиском)
- **Результаты**: Меню **Результаты** → **Просмотр результатов** (с поиском)

### Экспорт результатов

1. Выберите результаты, которые хотите экспортировать (отметьте чекбоксы)
2. Откройте меню **Результаты**
3. Выберите **Экспорт в Markdown** или **Экспорт в JSON**
4. Укажите путь для сохранения файла

## Создание исполняемого файла

Для создания исполняемого файла используйте PyInstaller:

```bash
pyinstaller --onefile --windowed --name "ChatList" main.py
```

Параметры:
- `--onefile` - создает один исполняемый файл
- `--windowed` - скрывает консольное окно (для GUI приложений)
- `--name "ChatList"` - имя исполняемого файла

Исполняемый файл будет создан в папке `dist/`.

## Структура проекта

```
ChatList/
├── main.py              # Главный файл с GUI интерфейсом
├── db.py                # Работа с базой данных SQLite
├── models.py            # Классы для работы с моделями
├── network.py           # Отправка запросов к API
├── export.py            # Экспорт результатов
├── logger.py            # Логирование запросов
├── requirements.txt     # Зависимости Python
├── .env.local          # Переменные окружения (создается пользователем)
├── chatlist.db         # База данных SQLite (создается автоматически)
└── logs/               # Директория с логами
    └── chatlist.log    # Файл логов
```

## База данных

Приложение использует SQLite базу данных `chatlist.db`, которая создается автоматически при первом запуске. База данных содержит следующие таблицы:

- **prompts**: Сохраненные промты
- **models**: Настроенные модели
- **results**: Сохраненные результаты запросов
- **settings**: Настройки приложения

## Логирование

Все запросы логируются в файл `logs/chatlist.log` с детальной информацией:
- Название модели и промт
- Технические детали (URL, API ID, тип API, temperature и т.д.)
- Результат запроса (успех/ошибка)
- Информация о токенах и времени ответа
- Типы ошибок (timeout, network_error, api_error и т.д.)

## Лицензия

MIT License

Copyright (c) 2025 soal8877-ctrl
